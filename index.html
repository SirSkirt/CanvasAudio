<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Audio</title>
    <link rel="icon" type="image/png" href="favico.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
	<script src="mobile-ui.js"></script>
    <script src="mobile-ui.js"></script>
<script src="mobile-debug.js"></script> ```
    <script src="canvasaudio.js?v=0.5.0"></script>
    <script src="plugin.js?v=0.5.0"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
  
  <div id="title-bar" style="display:none;">
    <div class="title-bar-left">
      <img src="favico.png" class="title-icon">
      <span class="title-text">Canvas Audio</span>
      <div class="custom-menu-bar">
        <div class="menu-item">File</div>
        <div class="menu-item">Edit</div>
        <div class="menu-item">View</div>
        <div class="menu-item">Window</div>
        <div class="menu-item">Help</div>
      </div>
    </div>
    <div class="title-bar-controls">
      <button id="btn-min" class="win-btn" title="Minimize"><i class="fas fa-minus"></i></button>
      <button id="btn-max" class="win-btn" title="Maximize"><i class="far fa-square"></i></button>
      <button id="btn-close" class="win-btn close-btn" title="Close"><i class="fas fa-times"></i></button>
    </div>
  </div>

  <div id="mainMenuOverlay" class="main-menu-overlay">
    <div class="main-menu-card">
      <div class="main-menu-title">Canvas Audio</div>
      <button id="menuNewProject" class="main-menu-btn">New Project (WIP)</button>
      <button id="menuOpenProject" class="main-menu-btn">Open Project (WIP)</button>
      <button id="menuRecentProject" class="main-menu-btn">Recently Opened (WIP)</button>
      <div class="main-menu-hint">Select an option to continue.</div>
    </div>
  </div>

  <div id="audioStatusPanel" class="audio-status-panel">
    <div id="audioStatusText" class="audio-status-text">Audio Not Ready</div>
    <button id="audioToggleBtn" class="audio-toggle-btn">Start</button>
  </div>

    <div class="toolbar">

        <div class="app-logo"><i class="fas fa-layer-group"></i> Canvas Audio</div>
        
        <div class="btn-group">
            <button id="mode-pat" class="active" onclick="setMode('PATTERN')">PAT</button>
            <button id="mode-song" onclick="setMode('SONG')">SONG</button>
        </div>

        <div class="btn-group">
            <button id="play-btn" onclick="togglePlay()"><i class="fas fa-play"></i></button>
            <button id="stop-btn" onclick="stopTransport()"><i class="fas fa-stop"></i></button>
            <button id="mixer-btn" title="Mixer" onclick="openMixerWindow()"><i class="fas fa-sliders-h"></i></button>
        </div>

        <div class="transport-controls">
            <div class="control-item">
                <i class="fas fa-heartbeat"></i>
                <input type="number" id="bpm-input" value="128" onchange="updateBPM(this.value)">
                <span>BPM</span>
            </div>
            
            <div class="control-item">
                <i class="fas fa-clock"></i>
                <select id="time-sig" onchange="updateTimeSig(this.value)">
                    <option value="4">4/4</option>
                    <option value="3">3/4</option>
                </select>
            </div>
        </div>

        <div class="edit-tools">
            <button class="tool-btn" onclick="editTool('select')" title="Select Clip"><i class="fas fa-mouse-pointer"></i></button>
            <button class="tool-btn" onclick="editTool('split')" title="Split at Playhead"><i class="fas fa-cut"></i></button>
            <button class="tool-btn" onclick="editTool('mute')" title="Mute Clip"><i class="fas fa-volume-mute"></i></button>
            <button class="tool-btn dest-btn" onclick="editTool('delete')" title="Delete Clip"><i class="fas fa-trash"></i></button>
            
            <button class="tool-btn" onclick="editTool('copy')" title="Copy"><i class="fas fa-copy"></i></button>
            <button class="tool-btn" onclick="editTool('paste')" title="Paste at Playhead"><i class="fas fa-paste"></i></button>
            <button class="tool-btn" onclick="editTool('trimStart')" title="Trim Start to Playhead"><i class="fas fa-angle-double-right"></i></button>
            <button class="tool-btn" onclick="editTool('trimEnd')" title="Trim End to Playhead"><i class="fas fa-angle-double-left"></i></button>
        </div>

	</div>
		<div class="version-label" id="version-label"></div>
        
    </div>

    <div class="workspace">
        <div class="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-header">
                    <span>Patterns</span>
                    <i class="fas fa-plus" onclick="createNewPattern()" title="New Pattern"></i>
                </div>
                <div class="resource-list" id="pattern-list"></div>
            </div>

            <div class="sidebar-section" style="border-top: 1px solid #000;">
                <div class="sidebar-header">
                    <span>Audio Clips</span>
                    <i class="fas fa-folder-open" onclick="document.getElementById('audio-upload').click()" title="Import Audio"></i>
                </div>
                <div class="resource-list" id="audio-list"></div>
            </div>
        </div>

        <div class="playlist-container">
            <div class="playlist-header" id="ruler"></div> 
            
            <div class="playlist-scroll" id="playlist-scroll">
                <div id="playhead"><div class="playhead-triangle"></div></div>
                <div id="playlist-tracks"></div> 
            </div>
        </div>
    </div>

    <div class="channel-rack">
        <div class="rack-header">
            <span id="rack-title">SEQUENCER</span>
            <button onclick="clearCurrentPattern()" style="font-size:10px; padding:2px 8px;">Clear</button>
        </div>
        <div class="rack-scroll" id="rack-rows"></div>
    </div>

    <input type="file" id="audio-upload" accept="audio/*" style="display:none;" onchange="handleAudioUpload(this)">

	
<div id="fxOverlay">
    <div id="fxWindow">
      <div class="fxwin-header" id="fxWinHeader">
        <div class="fxwin-titlebar" id="fxWinTitle">Effects</div>
        <div style="display:flex; gap:6px; align-items:center;">
          <select id="fxPluginSelect"></select>
          <button id="fxAddPluginBtn">Add</button>
          <button id="fxCloseBtn">X</button>
        </div>
      </div>
      <div class="fxwin-body" id="fxWinBody"></div>
    </div>
  </div>
    

    <div class="overlay" id="mixerOverlay" style="display:none;">
        <div class="modal mixer-modal">
            <div class="modal-header">
                <span>Mixer</span>
                <button class="modal-close" onclick="closeMixerWindow()">&times;</button>
            </div>
            <div class="modal-body" id="mixerBody"></div>
        </div>
    </div>

    <div class="overlay" id="inputMenuOverlay" style="display:none;">
        <div class="modal input-modal">
            <div class="modal-header">
                <span>Input</span>
                <button class="modal-close" onclick="closeTrackInputMenu()">&times;</button>
            </div>
            <div class="modal-body" id="inputMenuBody"></div>
        </div>
    </div>
    
    <div id="standalone-banner" style="display:none;">
      <div class="banner-text">
          <i class="fas fa-info-circle"></i> 
          Download the standalone app for offline saves & better performance.
      </div>
      <div style="display:flex; align-items:center;">
          <a href="https://github.com/SirSkirt/CanvasAudio/releases" target="_blank" class="banner-btn">
              Download
          </a>
          <button class="banner-close" onclick="document.getElementById('standalone-banner').style.display='none'">&times;</button>
      </div>
    </div>

</body>
</html>
